<div class="d-flex flex-row">
    <div class="card card-default col-md-3 mr-5 ml-4 mt-4 mb-1">
        <div class="d-flex align-items-center justify-content-between">
            <a href="" class="p-2 fw-normal " style="color:grey !important;"><i class="fa-solid fa-less-than"></i> Retour</a>
            <a href="" class="p-2 fw-normal " style="color:grey !important;"><i class="fa-solid fa-bars p-1"></i> Actions</a>
        </div>  
        <div class="d-flex align-items-center justify-content-between">
            <a href="" class="p-2 fw-normal" >Debiteur principal </a>
            <a href="" class="p-2 fw-normal" style="color:orange !important;"><i class="fa-solid fa-pencil"></i></a>
        </div>
        <div class="card mt-2p-2 " style="border-top:solid #CFDBE2;">
        <div class="d-flex justify-content-start p-3">
        <div class="d-flex flex-column">
                <div class="d-flex flex-row align-items-center">
                    <div class="icon"> 
                        <img class="img-fluid" src="assets/profile_img/profile.png" alt="App Logo" style="width: 40px;">
                    </div>
                    <div id="dot" class=" mx-2"></div>
                    <div class="ms-2 c-details">
                        <p class="mb-0 p-2 fs-6" style="font-size: small !important;">
                                {{debiteur.civilite}}
                            <br>
                            <span *ngIf="debiteur.nom"> {{debiteur.nom}}</span>
                            <span *ngIf="debiteur.prenom"> {{debiteur.prenom}}</span>
                        </p> 
                    </div>
                </div>
                <div class="mx-5">
                <p class="heading fw-lighter ">{{ debiteur.date_naissance | date:'yyyy-MM-dd' }}
                    <ng-template *ngIf="debiteur.lieu_naissance">
                        , {{debiteur.lieu_naissance}}
                    </ng-template>
                </p>
                </div>
            </div>
            </div>
            <div class="">
            <p class=" ms-3 fw-lighter"><span *ngIf="debiteur.raison_sociale"> {{debiteur.raison_sociale}}</span> 
                <span *ngIf="debiteur.email"> ,{{debiteur.email}}</span>
            </p>
            <div class="mt-3 ">
                <a class="float-end " href="" style="color:grey;"><i class="fa-solid fa-eye "></i> Plus</a>
                <div class="progress">
                    <div class="progress-bar" role="progressbar" style="width: 50% ;background-color:orange !important;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
            </div>
        </div>
        <a href="" class="p-2 fw-normal " >Details de contact </a>
        <div class="card  card-default" style="border-top:solid #CFDBE2;">
            <p  class="p-2 fw-normal mt-0" ><i class="fa-solid fa-mobile"></i> {{tel.numero}},{{type_adresse}}  </p>
            <p  class="p-2 fw-normal mt-0" ><i class="fa-solid fa-map-location-dot"></i> {{adresse.adresse_complet}},{{type_email}} </p>
            <p  class="p-2 fw-normal mt-0" ><i class="fa-solid fa-envelope"></i> {{email_deb.email}},{{type_tel}} </p>
        </div>
        <div class="d-flex align-items-center justify-content-between">
            <a href="" class="p-2 fw-normal " >Hitorique du dossier</a>
            <a href="" class="p-2 fw-normal " style="color:grey !important;"><i class="fa-solid fa-plus"></i></a>
        </div>
        <div class="card main-card" >
            <div class="card-list"style="overflow-y: auto;height: 600px;">
                <div class="card" *ngFor="let histo of historique">
                    <div class="d-flex justify-content-around align-items-center p-2">
                        <div><i class="fa-solid fa-clipboard-list"></i> {{histo.titre}}</div>
                        <span class="badge rounded-pill text-bg-success">Le {{histo.date_creation  | date:'yyyy-MM-dd' }}</span>
                    </div>
                    <div class="card-body">
                        <div>Action <span>{{histo.note}}</span></div>
                    </div>
                </div>               
                <!-- Add more cards here -->
            </div>
        </div>
    </div>

    <div class=" col-md-8 mt-4 detail" >
        <div class="card card-default">
        <div class="card-body">
            <h4 class="card-description text-primary ">
                Details :
            </h4>
            <!--Form-->
            <div>
                <b>Ref: # {{dossier.dossier.numero_dossier}}</b>
                <div class="row">
                    <div class="col-md-6">
                        <b>Créance: </b>text.....<br/>
                        <b>Portefeuille: </b>{{  dossier.ptf.titre }}<br/>
                        <b>Débiteur: </b>{{  debiteur.nom }}<br/>
                    </div>
                    <div class="col-md-6">
                        <b>Agent: </b>{{  dossier.user.nom }} , {{dossier.user.cin }}<br/>
                        <b>Solde: </b>...<br/>
                        <b>Date prèvisionnelle: </b>{{dossier.date_fin_prevesionnel  | date:'yyyy-MM-dd' }}<br/>
                    </div>
                </div>
                <div class="row mt-5">
                    <div class="col-md-4">
                        <mat-card class="example-card" style="" style="cursor:pointer">
                            <mat-card-header>
                              <mat-card-title-group >
                                <mat-card-subtitle class="text-primary2"><mat-icon>file_copy</mat-icon><b class="h4 title-card" >Fichiers attachés</b></mat-card-subtitle>
                                <mat-icon class="icon-card">keyboard_arrow_right</mat-icon>
                              </mat-card-title-group>
                            </mat-card-header>
                          </mat-card>
                    </div>
                    <div class="col-md-4">
                        <mat-card class="example-card" style="" style="cursor:pointer">
                            <mat-card-header>
                              <mat-card-title-group >
                                <mat-card-subtitle class="text-primary2"><mat-icon> insert_drive_file</mat-icon><b class="h4 title-card" >Factures</b></mat-card-subtitle>
                                <mat-icon class="icon-card">keyboard_arrow_right</mat-icon>
                              </mat-card-title-group>
                            </mat-card-header>
                        </mat-card>
                    </div>
                    <div class="col-md-4">
                        <mat-card class="example-card" style="" style="cursor:pointer">
                            <mat-card-header>
                              <mat-card-title-group >
                                <mat-card-subtitle class="text-primary2"><mat-icon> attach_money</mat-icon><b class="h4 title-card" >Paiement</b></mat-card-subtitle>
                                <mat-icon class="icon-card">keyboard_arrow_right</mat-icon>
                              </mat-card-title-group>
                            </mat-card-header>
                        </mat-card>
                    </div>
                </div>
                <div class="row mt-5">
                    <b class="text-primary h4"><mat-icon> message</mat-icon> Notes</b>
                    <div>
                        <div *ngFor="let note of notes">
                            
                        </div>
                    </div>
                    <b class="text-primary h4"><mat-icon> insert_drive_file</mat-icon> Accords</b>
                    <mat-tab-group>
                        <mat-tab label="Accords en cours"> 
                            <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
                                <ng-container matColumnDef="reference">
                                  <th mat-header-cell *matHeaderCellDef> No. </th>
                                  <td mat-cell *matCellDef="let element"> {{element.reference}} </td>
                                </ng-container>
                              
                                <!-- Name Column -->
                                <ng-container matColumnDef="frequence">
                                  <th mat-header-cell *matHeaderCellDef> frequence </th>
                                  <td mat-cell *matCellDef="let element"> {{element.frequence}} </td>
                                </ng-container>
                              
                                <!-- Weight Column -->
                                <ng-container matColumnDef="type_paiement">
                                  <th mat-header-cell *matHeaderCellDef> mode_paiement </th>
                                  <td mat-cell *matCellDef="let element"> {{element.type_paiement}} </td>
                                </ng-container>
                                <ng-container matColumnDef="total_creance">
                                    <th mat-header-cell *matHeaderCellDef> total_creance </th>
                                    <td mat-cell *matCellDef="let element"> {{element.total_creance}} </td>
                                  </ng-container>
                              
                                <!-- Symbol Column -->
                                <ng-container matColumnDef="montant">
                                  <th mat-header-cell *matHeaderCellDef> montant </th>
                                  <td mat-cell *matCellDef="let element"> {{element.montant}} </td>
                                </ng-container>

                                <ng-container matColumnDef="montant_restant">
                                  <th mat-header-cell *matHeaderCellDef> rest </th>
                                  <td mat-cell *matCellDef="let element"> {{element.montant_restant}} </td>
                                </ng-container>
                                
                                <ng-container matColumnDef="date_creation">
                                    <th mat-header-cell *matHeaderCellDef> date </th>
                                    <td mat-cell *matCellDef="let element"> {{element.date_creation | date:'yyyy-MM-dd' }} </td>
                                </ng-container>
                                <ng-container matColumnDef="etat">
                                    <th mat-header-cell *matHeaderCellDef> etat </th>
                                    <td mat-cell *matCellDef="let element"> {{element.etat}} </td>
                                </ng-container>
                                <ng-container matColumnDef="motif">
                                    <th mat-header-cell *matHeaderCellDef> motif </th>
                                    <td mat-cell *matCellDef="let element"> {{element.motif}} </td>
                                </ng-container>
                              
                                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                            </table>
                        </mat-tab>
                        <mat-tab label="Accords archivés">
                            <table mat-table [dataSource]="dataSource1" class="mat-elevation-z8">
                                <ng-container matColumnDef="reference">
                                  <th mat-header-cell *matHeaderCellDef> No. </th>
                                  <td mat-cell *matCellDef="let element"> {{element.reference}} </td>
                                </ng-container>
                              
                                <!-- Name Column -->
                                <ng-container matColumnDef="frequence">
                                  <th mat-header-cell *matHeaderCellDef> frequence </th>
                                  <td mat-cell *matCellDef="let element"> {{element.frequence}} </td>
                                </ng-container>
                              
                                <!-- Weight Column -->
                                <ng-container matColumnDef="type_paiement">
                                  <th mat-header-cell *matHeaderCellDef> mode_paiement </th>
                                  <td mat-cell *matCellDef="let element"> {{element.type_paiement}} </td>
                                </ng-container>
                                <ng-container matColumnDef="total_creance">
                                    <th mat-header-cell *matHeaderCellDef> total_creance </th>
                                    <td mat-cell *matCellDef="let element"> {{element.total_creance}} </td>
                                  </ng-container>
                              
                                <!-- Symbol Column -->
                                <ng-container matColumnDef="montant">
                                  <th mat-header-cell *matHeaderCellDef> montant </th>
                                  <td mat-cell *matCellDef="let element"> {{element.montant}} </td>
                                </ng-container>

                                <ng-container matColumnDef="montant_restant">
                                  <th mat-header-cell *matHeaderCellDef> rest </th>
                                  <td mat-cell *matCellDef="let element"> {{element.montant_restant}} </td>
                                </ng-container>
                                
                                <ng-container matColumnDef="date_creation">
                                    <th mat-header-cell *matHeaderCellDef> date </th>
                                    <td mat-cell *matCellDef="let element"> {{element.date_creation | date:'yyyy-MM-dd' }} </td>
                                </ng-container>
                                <ng-container matColumnDef="etat">
                                    <th mat-header-cell *matHeaderCellDef> etat </th>
                                    <td mat-cell *matCellDef="let element"> {{element.etat}} </td>
                                </ng-container>
                                <ng-container matColumnDef="motif">
                                    <th mat-header-cell *matHeaderCellDef> motif </th>
                                    <td mat-cell *matCellDef="let element"> {{element.motif}} </td>
                                </ng-container>
                              
                                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                            </table>
                        </mat-tab>
                    </mat-tab-group>  
                    <b class="text-primary h4"><mat-icon> mail_outline</mat-icon> Campagne</b>
                    <mat-tab-group>
                        <mat-tab label="Courrier"> 
                            <table mat-table [dataSource]="dataSourceC" class="mat-elevation-z8">
                                <ng-container matColumnDef="num">
                                  <th mat-header-cell *matHeaderCellDef> No. </th>
                                  <td mat-cell *matCellDef="let element"> {{element.id}} </td>
                                </ng-container>
                              
                                <!-- Name Column -->
                                <ng-container matColumnDef="titre">
                                  <th mat-header-cell *matHeaderCellDef> Titre </th>
                                  <td mat-cell *matCellDef="let element"> {{element.titre}} </td>
                                </ng-container>
                              
                                <!-- Weight Column -->
                                <ng-container matColumnDef="date_creation">
                                  <th mat-header-cell *matHeaderCellDef> Date creation </th>
                                  <td mat-cell *matCellDef="let element"> {{element.date_creation | date:'yyyy-MM-dd H:m' }} </td>
                                </ng-container>
                                <ng-container matColumnDef="action">
                                    <th mat-header-cell *matHeaderCellDef>  </th>
                                    <td mat-cell *matCellDef="let element"> </td>
                                </ng-container>
                              
                                <tr mat-header-row *matHeaderRowDef="displayedColumnsCourrier"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumnsCourrier;"></tr>
                            </table>
                        </mat-tab>
                        <mat-tab label="Sms">
                            <table mat-table [dataSource]="dataSourceS" class="mat-elevation-z8">
                                <ng-container matColumnDef="num">
                                  <th mat-header-cell *matHeaderCellDef> No. </th>
                                  <td mat-cell *matCellDef="let element"> {{element.id}} </td>
                                </ng-container>
                              
                                <!-- Name Column -->
                                <ng-container matColumnDef="titre">
                                  <th mat-header-cell *matHeaderCellDef> Titre </th>
                                  <td mat-cell *matCellDef="let element"> {{element.titre}} </td>
                                </ng-container>
                              
                                <!-- Weight Column -->
                                <ng-container matColumnDef="date_creation">
                                  <th mat-header-cell *matHeaderCellDef> Date creation </th>
                                  <td mat-cell *matCellDef="let element"> {{element.date_creation | date:'yyyy-MM-dd H:m' }} </td>
                                </ng-container>
                                <ng-container matColumnDef="action">
                                    <th mat-header-cell *matHeaderCellDef>  </th>
                                    <td mat-cell *matCellDef="let element"> </td>
                                </ng-container>
                              
                                <tr mat-header-row *matHeaderRowDef="displayedColumnsSms"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumnsSms;"></tr>
                            </table>
                        </mat-tab>
                        <mat-tab label="Email">
                            <table mat-table [dataSource]="dataSourceE" class="mat-elevation-z8">
                                <ng-container matColumnDef="num">
                                  <th mat-header-cell *matHeaderCellDef> No. </th>
                                  <td mat-cell *matCellDef="let element"> {{element.id}} </td>
                                </ng-container>
                                <!-- Name Column -->
                                <ng-container matColumnDef="titre">
                                  <th mat-header-cell *matHeaderCellDef> Titre </th>
                                  <td mat-cell *matCellDef="let element"> {{element.titre}} </td>
                                </ng-container>
                                <!-- Weight Column -->
                                <ng-container matColumnDef="date_creation">
                                  <th mat-header-cell *matHeaderCellDef> Date creation </th>
                                  <td mat-cell *matCellDef="let element"> {{element.date_creation | date:'yyyy-MM-dd H:m' }} </td>
                                </ng-container>
                                <ng-container matColumnDef="action">
                                    <th mat-header-cell *matHeaderCellDef>  </th>
                                    <td mat-cell *matCellDef="let element"> </td>
                                </ng-container>
                                <tr mat-header-row *matHeaderRowDef="displayedColumnsEmail"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumnsEmail;"></tr>
                            </table>
                        </mat-tab>
                    </mat-tab-group>  
                </div>
            </div>
        </div>
        </div>
    </div>
</div>