<div class="card card-default col-md-12 m-2" style="width: 96%">
  <div class="card-header text-primary">Cr√©er un donneur d'ordre</div>
  <div class="card-body">
    <form
      class="form-horizontal"
      method="POST"
      enctype="multipart/form-data"
      (ngSubmit)="
        AddDonneur(
          rs.value,
          nom.value,
          metier.value,
          compte_bancaire.value,
          num_rc.value,
          c_postale.value,
          date_debut.value,
          date_fin.value
        )
      "
    >
    <!-- <mat-form-field appearance="outline">
      <mat-label>Tables</mat-label>
      <mat-select  >
          <mat-option >test</mat-option>
          <mat-option >test</mat-option>
          <mat-option >test</mat-option>
          <mat-option >test</mat-option>

      </mat-select>
      
  </mat-form-field> -->
      <fieldset>
        <div class="form-group row input_div">
          <label class="col-md-2 col-form-label" for="input-id-1"
            >Raison sociale
            <span class="text-danger">*</span>
          </label>
          <div class="col-md-4">
            <mat-form-field appearance="outline">
              <mat-label>Raison sociale </mat-label>
              <input
                class="custom-input "
                matInput
                name="rs"
                type="text"
                value=""
                #rs
              />
            </mat-form-field>
          </div>
          <label class="col-md-2 col-form-label" for="input-id-1"
            >Nom du responsable
            <span class="text-danger">*</span>
          </label>
          <div class="col-md-4">
            <mat-form-field appearance="outline">
              <mat-label>Nom du responsable</mat-label>
              <input
                class="custom-input"
                matInput
                name="nom"
                type="text"
                value=""
                #nom
              />
            </mat-form-field>
          </div>
        </div>
      </fieldset>
      <fieldset>
        <div class="form-group row input_div">
          <label class="col-md-2 col-form-label" for="input-id-1"
            >Metier
            <span class="text-danger">*</span>
          </label>
          <div class="col-md-4">
            <mat-form-field appearance="outline">
              <mat-label>Metier </mat-label>
              <input
                class="custom-input"
                matInput
                name="metier"
                type="text"
                value=""
                #metier
              />
            </mat-form-field>
          </div>
          <label class="col-md-2 col-form-label" for="input-id-1"
            >Compte bancaire
            <span class="text-danger">*</span>
          </label>
          <div class="col-md-4">
            <mat-form-field appearance="outline">
              <mat-label>Compte Bancaire </mat-label>
              <input
                class="custom-input"
                name="compte_bancaire"
                type="text"
                value=""
                matInput
                #compte_bancaire
              />
            </mat-form-field>
          </div>
        </div>
      </fieldset>

      <fieldset>
        <div class="form-group row input_div">
          <label class="col-md-2 col-form-label" for="input-id-1"
            >Numero rc</label
          >
          <div class="col-md-4">
            <mat-form-field appearance="outline">
              <mat-label>Numero rc</mat-label>
              <input
                class="custom-input"
                matInput
                name="num_rc"
                type="text"
                value=""
                #num_rc
              />
            </mat-form-field>
          </div>
          <label class="col-md-2 col-form-label" for="input-id-1"
            >code postal
            <span class="text-danger">*</span>
          </label>
          <div class="col-md-4">
            <mat-form-field appearance="outline">
              <mat-label>code postal</mat-label>
              <input
                class="custom-input"
                matInput
                name="c_postale"
                type="text"
                value=""
                #c_postale
              />
            </mat-form-field>
          </div>
        </div>
      </fieldset>

      <fieldset>
        <div class="form-group row input_div">
          <label class="col-md-2 col-form-label" for="input-id-1"
            >Date debut
            <span class="text-danger">*</span>
          </label>
          <div class="col-md-4">
            <mat-form-field appearance="outline">
              <mat-label>Date debut </mat-label>
              <input
                class="custom-input"
                matInput
                [matDatepicker]="picker"
                name="date_debut"
                value=""
                #date_debut
              />
              <mat-hint>MM/DD/YYYY</mat-hint>
              <mat-datepicker-toggle
                matIconSuffix
                [for]="picker"
              ></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
          </div>
          <label class="col-md-2 col-form-label" for="input-id-1"
            >Date fin
            <span class="text-danger">*</span>
          </label>
          <div class="col-md-4">
            <mat-form-field appearance="outline">
              <mat-label>Date fin </mat-label>
            <input  
            class="custom-input"
            matInput
            [matDatepicker]="pickerf" name="date_fin"  #date_fin />
            <mat-hint>MM/DD/YYYY</mat-hint>
              <mat-datepicker-toggle
                matIconSuffix
                [for]="pickerf"
              ></mat-datepicker-toggle>
              <mat-datepicker #pickerf></mat-datepicker>
            </mat-form-field>
          </div>
        </div>
      </fieldset>
      <fieldset>
        <div class="form-group row input_div">
          <label class="col-md-2 col-form-label" for="input-id-1"
            >Type donneur
            <span class="text-danger">*</span>
          </label>
          <div class="col-md-4">
            <mat-form-field appearance="outline">
              <mat-label>Type donneur</mat-label>
              <mat-select
                [(ngModel)]="id_type"
                [ngModelOptions]="{ standalone: true }"
                >
                <mat-option
                  *ngFor="let item of liste_type"
                  [value]="item.id">{{ item.type }}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </fieldset>

      

      <fieldset>
        <div class="form-group row m-3 input_div" *ngFor="let champ of champs">
          <label class="col-md-2 col-form-label" for="input-id-1">
            {{ champ.champ_name }}
            <span class="text-danger">*</span>
          </label>
          <div class="col-md-4">
            <mat-form-field appearance="outline">
              <mat-label> {{ champ.champ_name }}</mat-label>
            <input
              class="custom-input"
              matInput
              [(ngModel)]="champ.value"
              name="input[{{ champ.id }}]"
              type="{{ champ.type }}"
              [required]="champ.required === true"
              (change)="handleInputChange()"
            />
            </mat-form-field>
          </div>
        </div>
      </fieldset>

      <button type="button" class="btn btn-primary mb-4" (click)="openModal()" mat-raised-button style="background-color:#FF7C05; color:white">
        Ajouter contacts
      </button>
      <table
        id="example"
        class="table table-striped table-bordered dt-responsive nowrap"
      >
        <thead>
          <tr>
            <th>Nom</th>
            <th>Prenom</th>
            <th>Adresse</th>
            <th>email</th>
            <th>Poste</th>
            <th>Telephone</th>
            <th>Mobile</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="tbody">
          <tr *ngFor="let item of Contactarray">
            <td>{{ item.nom }}</td>
            <td>{{ item.prenom }}</td>
            <td>{{ item.adresse }}</td>
            <td>{{ item.email }}</td>
            <td>{{ item.poste }}</td>
            <td>{{ item.tel }}</td>
            <td>{{ item.mobile }}</td>

            <td>
              <button
                type="button"
                class="btn btn-danger btn-sm m-1"
                (click)="DeleteContact(item.nom)"
              >
                <i class="fa fa-trash"></i>
              </button>
            </td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <th>Nom</th>
            <th>Prenom</th>
            <th>Adresse</th>
            <th>email</th>
            <th>Poste</th>
            <th>Telephone</th>
            <th>Mobile</th>
            <th>Actions</th>
          </tr>
        </tfoot>
      </table>
      <div class="text-center mt-4">
        <button type="submit" class="btn btn-warning" mat-raised-button color="primary">
          <i class="fa-solid fa-floppy-disk"></i> Enregistrer
        </button>
      </div>
    </form>
  </div>
</div>
