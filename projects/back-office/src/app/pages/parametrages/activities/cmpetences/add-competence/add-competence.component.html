<div class="content-wrapper row">
  <div class="card card-default col-md-3 mr-5 ml-4">
    <div class="d-flex align-items-center justify-content-between">
      <a
        onclick="history.back()"
        class="p-2 fw-normal"
        style="color: grey !important; cursor: pointer"
      >
        <i class="fa-solid fa fa-less-than"></i>
        Retour</a
      >
      <a href="" class="p-2 fw-normal" style="color: grey !important">
        <i class="fa-solid fa fa fa-bars p-1"></i>
        Actions</a
      >
    </div>
    <a href="/parametrages/activite" class="p-2 fw-normal">Compétences </a>
    <!--<span class="p-2"> Nombre des compétences<span class="badge rounded-pill text-bg-success ml-2 px-3" style="background-color: #03C988 !important">{{comp.length}}</span></span>-->
        <span class="p-2"> Nombre des compétences<span class="badge rounded-pill text-bg-success ml-2 px-3" style="background-color: #03C988 !important">12</span></span>
    <div class="card card-default" style="border-top: solid #cfdbe2" *ngFor="let item of comp">
      <div class="p-2 fw-normal mt-0">
        <!-- <span> Nombre des compétences</span>
        <span class="badge rounded-pill text-bg-success ml-2 px-3" style="background-color: #03C988 !important">2</span> -->
      </div>
      <div id="accordion">
        <div class="p-2 fw-normal mt-0">
            Titre de Competences accordées :
        </div>
        <div  class="p-2 fw-normal mt-0">
            <div>
                <li>{{item.titre}}</li>
            </div>
        </div>
        <!-- <div class="text-center p-2 ">
          <a class="float-end link-underline-opacity-100-hover link-underline-opacity-25 link-secondary "  style="color: grey;cursor: pointer" (click)="toggleComp()">
            Afficher Plus
            <i class="ml-2 fa-solid fa fa-eye"></i>
          </a>
        </div> -->
      </div>
    </div>
  </div>
  <div class="col-md-8">
    <div class="col-md-12">
      <div class="card card-default">
        <form #f="ngForm"  novalidate>
          <div class="card-body">
            <p class="card-description text-primary">Créer une compétence</p>
            <fieldset>
              <div class="form-group row  ">
                <div class="div_form_label">
                  <mat-label>Titre :</mat-label>
                </div>
                <div class="div_form_inputs input_div">
                  <mat-form-field  appearance="outline" style="width: 100%">
                    <mat-label>Titre</mat-label>
                    <input  matInput
                    placeholder="Titre competence"
                    [(ngModel)]="titreValue"
                    name="titreValue">
                  </mat-form-field>
                </div>
              </div>
            </fieldset>
            <fieldset>
              <h1>Sélectionner des familles : </h1>
              <div class="example-container">
                <h2>Liste familles </h2>
                <div
                  cdkDropList
                  #todoList="cdkDropList"
                  [cdkDropListData]="todo"
                  [cdkDropListConnectedTo]="[doneList]"
                  class="example-list"
                  (cdkDropListDropped)="drop($event)">
                  <div class="example-box" *ngFor="let item of todo" cdkDrag>{{item.titre}}</div>
                </div>
              </div>
              <div class="example-container">
                <h2>Liste familles sélectionnés</h2>
              
                <div
                  cdkDropList
                  #doneList="cdkDropList"
                  [cdkDropListData]="done"
                  [cdkDropListConnectedTo]="[todoList]"
                  class="example-list"
                  (cdkDropListDropped)="drop($event)">
                  <div class="example-box" *ngFor="let item of done" cdkDrag>{{item.titre}}</div>
                </div>
              </div>
            </fieldset>
            <fieldset>
              <h1>Sélectionner sous familles : </h1>
              <div class="form-group row">
                <div class="div_form_label">
                  <mat-label>Filtrer les familles :</mat-label>
                </div>
                <div class="div_form_inputs input_div">
                  <mat-form-field appearance="outline">
                    <mat-label>Familles</mat-label>
                    <mat-select
                      required
                      matInput
                      (selectionChange)="changeType(selectedType)"
                      [(ngModel)]="selectedType"
                      [ngModelOptions]="{ standalone: true }">
                      <mat-option *ngFor="let item of familles" [value]="item.id">{{item.titre}}</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>
              <div class="form-group row mt-5">
                <div class="form-group groupe_checkbox col-md-12 d-flex"
                  id="param_list">
                  <div class="form-check mr-2 form-check-primary col-md-6 bg_liste" *ngIf="selectedType">
                    <label class=" col-form-label" for="input-id-1"
                  >List des paramétrages
                  <span class="text-danger">*</span>
                </label>
                    <label class="form-check-label">
                      <p>
                        <mat-checkbox
                          *ngFor="let param of sousFamilles"
                          name="{{ param.id }}"
                          [(ngModel)]="param.isChecked"
                          color="primary"
                          (change)="onchangeCheck(param)"
                          >{{ param.type }}</mat-checkbox
                        >
                      </p>
                      <i class="input-helper"></i>
                    </label>
                  </div>
                  <div class="col-md-6 bg_liste">
                    <label class=" col-form-label">List des paramétres Selectionnées :</label>
                      <ul *ngFor="let items of SelectedCheck">
                        <li>  {{items.type}}</li>
                      </ul>
                  </div>
                </div>
              </div>
            </fieldset>
            
            <fieldset>
              <div class="form-group row">
                <div class="col-md-12">
                  <button
                    class="btn btn-primary col-md-4 offset-4"
                    (click)="onSubmit(f)"
                    mat-flat-button color="primary"
                  >
                    <i class="fa-solid fa fa-plus"></i>
                    Ajouter
                  </button>
                </div>
              </div>
            </fieldset>
          </div>
          
        </form>
      </div> 
      <!--<div class="card card-default">
        <form #f="ngForm" (ngSubmit)="onSubmit(f)" novalidate>
          <div class="card-body">
            <p class="card-description text-primary">Créer une compétence</p>
            <fieldset>
              <div class="form-group row gap-4">
                <div class="col-md-5">
                  <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Titre</mat-label>
                    <input matInput placeholder="Titre competence" [(ngModel)]="titreValue" name="titreValue" />
                  </mat-form-field>
                </div>
                <div class="col-md-5">
                  <mat-form-field appearance="outline">
                    <mat-label>Familles</mat-label>
                    <mat-select required matInput (selectionChange)="changeType()" [(ngModel)]="selectedType" [ngModelOptions]="{ standalone: true }">
                      <mat-option *ngFor="let item of familles" [value]="item.id">{{ item.titre }}</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>
            </fieldset>
      
            
            <fieldset>
                <div class="form-group ">
                  <label class="col-md-6 col-form-label" for="input-id-1">Liste des paramétrages <span class="text-danger">*</span></label>
                </div>
                <div class="form-group ">
                  <div class="col-md-6">
                    <div class="form-group form-check form-check-primary" *ngIf="selectedType">
                      <label class="form-check-label ">
                        <p *ngFor="let param of sousFamilles">
                          <mat-checkbox name="{{ param.id }}" [(ngModel)]="param.isChecked" class="row" color="primary" (change)="onchangeCheck(param)">
                            {{ param.type }}
                          </mat-checkbox>
                        </p>
                        <i class="input-helper"></i>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <label class="col-form-label">Liste des paramètres sélectionnés :</label>
                    <ul>
                      <li *ngFor="let item of SelectedCheck">{{ item.id }} : {{ item.code }}</li>
                    </ul>
                  </div>
                </div>
              </fieldset>      
            <fieldset>
              <div class="form-group row position-relative">
                <div class="">
                  <button class="btn btn-primary col-md-3 position-absolute top-0 start-50 translate-middle-x" mat-flat-button color="primary" type="submit">
                    <i class="fa-solid fa fa-plus"></i> Ajouter
                  </button>
                </div>
              </div>
            </fieldset>
          </div>
        </form>
      </div>-->
      
      <div class="card card-default card card-default">
        <div class="card-body">
          <p class="card-description text-primary">Liste des compétences</p>
          <div class="table-responsive">
            <div class="w-100">
                <table mat-table [dataSource]="dataSource"   class="mat-elevation-z8 demo-table">
                  <!-- Position Column -->
                  <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef> Numéro </th>
                    <td mat-cell *matCellDef="let element"> {{element.id}} </td>
                  </ng-container>
                  <!-- Name Column -->
                  <ng-container matColumnDef="titre">
                    <th mat-header-cell *matHeaderCellDef> titre </th>
                    <td mat-cell *matCellDef="let element"> {{element.titre}} </td>
                  </ng-container>

                  <ng-container matColumnDef="operation">
                    <th mat-header-cell *matHeaderCellDef> Opération </th>
                    <td mat-cell *matCellDef="let element"> 
                        <button   class=" mr-1" type="button" mat-flat-button color="primary" (click)="test2()"><i class="fa-solid fa fa-pen text-white"></i></button>   
                        <button class="" type="button" mat-flat-button color="warn" (click)="test()" ><i class="fa-solid fa fa-trash text-white "></i></button>    
                    </td>
                  </ng-container>
              
                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
              
                <mat-paginator [pageSizeOptions]="[5, 10, 20]"
                               showFirstLastButtons
                               aria-label="Select page of periodic elements">
                </mat-paginator>
              </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
